<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,500,1,0" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
<title>Profile Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    
<style>
/* Blue theme special rules */
[data-theme="blue"] .dynamic_island {
  background: #000 !important;
}

[data-theme="blue"] .theme-switcher button {
  color: #fff;
  background: rgba(0,0,0,0.75);
}

[data-theme="blue"] .theme-switcher button:hover {
  background: rgba(0,0,0,0.9);
}


/* ================================
   THEME: PINK
   ================================ */

html[data-theme="pink"] body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;

  background: url("bg2.jpg") center / cover no-repeat;
  filter: blur(8px);
  transform: scale(1.08);

  transition: opacity 0.6s ease;
}

html[data-theme="pink"] body {
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 131, 187, 0.5), transparent 45%),
    radial-gradient(circle at 80% 70%, rgba(255, 0, 0, 0.5), transparent 45%),
    linear-gradient(180deg, #ffcce8, #ff006a);
}

html[data-theme="pink"] .banner {
  background-image:
    linear-gradient(
      to bottom,
      rgba(255,240,245,0.55),
      rgba(255,120,180,0.45)
    ),
    url("gif-banner.gif");
}

/* ================================
   THEME: DARK
   ================================ */

html[data-theme="dark"] body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;

  background: url("bg7.jpg") center / cover no-repeat;
  filter: blur(8px);
  transform: scale(1.08);

  transition: opacity 0.6s ease;
}

html[data-theme="dark"] body {
  background:
    radial-gradient(circle at 20% 20%, rgba(224, 224, 255, 0.25), transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(70, 224, 255, 0.35), transparent 50%),
    linear-gradient(180deg, #5009ad, #0627e4);
}

html[data-theme="dark"] .banner {
  background-image:
    linear-gradient(
      to bottom,
      rgba(255,255,255,0.08),
      rgba(0,0,0,0.6)
    ),
    url("banner2.jpg");
}

/* ================================
   THEME: BLUE
   ================================ */

html[data-theme="blue"] body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;

  background: url("bg8.jpg") center / cover no-repeat;
  filter: blur(8px);
  transform: scale(1.08);

  transition: opacity 0.6s ease;
}

html[data-theme="blue"] body {
  background:
    radial-gradient(circle at 25% 20%, rgba(170,210,255,0.45), transparent 45%),
    radial-gradient(circle at 75% 80%, rgba(100,160,255,0.4), transparent 45%),
    linear-gradient(180deg, #001eff, #86edff);
}

html[data-theme="blue"] .banner {
  background-image:
    linear-gradient(
      to bottom,
      rgba(220,240,255,0.55),
      rgba(80,140,255,0.45)
    ),
    url("bg9.jpg");
}















* {
    box-sizing: border-box;
    font-family: "Inter", "Segoe UI", sans-serif;
    color: #fff;
}

/* ===== BACKGROUND ===== */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: url("bg6.jpg") center / cover no-repeat;
    filter: blur(6px) brightness(0.9);
    opacity: 0.68;
    z-index: -2;

}

body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(180deg, #aa00ff, #f700ff);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ===== WRAPPER ===== */
.wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

/* ================= PROFILE CARD ================= */
.profile {
    width: 320px;
    padding: 25px;
    border-radius: 20px;
    text-align: center;
    overflow: visible;

    background: rgba(255,255,255,0.18);
    backdrop-filter: blur(8px) saturate(120%);
    border: 1px solid rgba(255,255,255,.45);
    box-shadow: 0 8px 30px rgba(0,0,0,0.22);

    transform: translateX(0);
    transition: transform 0.45s cubic-bezier(.2,.8,.2,1);
    z-index: 2;

    animation: cardUp 0.9s cubic-bezier(.22,1,.36,1) both;
}

.profile.shift {
    transform: translateX(-60px);
}

/* avatar wrapper */
.avatar-wrap {
  position: relative;
  width: 120px;
  height: 120px;
  margin: 26px auto 18px;
}

/* avatar */
.avatar {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  padding: 4px;
  background: #fff;
  object-fit: cover;
  display: block;
  position: relative;
  z-index: 2;

  box-shadow:
    0 0 0 4px rgba(255,255,255,0.35),
    0 8px 25px rgba(0,0,0,0.32);
}

/* shared arc style */
.avatar-wrap .quarter_top,
.avatar-wrap .quarter_bottom {
  position: absolute;
  width: 70px;
  height: 70px;
  border: 3px solid rgba(255, 255, 255, 0.85);
  pointer-events: none;
  z-index: 1;
}

/* top-left arc */
.avatar-wrap .quarter_top {
  bottom: -11px;    /* small visible gap */
  left: -11px;
  border-top: none;
  border-right: none;
  border-radius: 0 0 0 100%;
  transform: translate(1.35px, 0) !important;
}

/* bottom-right arc */
.avatar-wrap .quarter_bottom {
  bottom: -11px;
  right: -11px;
  border-left: none;
  border-top: none;
  border-radius: 0 0 100% 0;
  transform: translate(-1.35px, 0) !important;
}

.avatar-zone {
  position: relative;
  overflow: visible;
}

/* Avatar */
.profile img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    padding: 4px;
    background: #fff;
    object-fit: cover;
    box-shadow:
        0 0 0 4px rgba(255,255,255,0.35),
        0 8px 25px rgba(0,0,0,0.32);

    margin-bottom: 16px;
    opacity: 0;
    animation: avatarUp 0.7s cubic-bezier(.2,.8,.2,1) forwards;
    animation-delay: 0.15s;
}


/* Name */
.profile h2 {
    margin-bottom: 20px;
    text-shadow: 0 0 10px rgba(255,255,255,0.25);
    opacity: 0;
    animation: textUp 0.6s ease forwards;
    animation-delay: 0.35s;
}

/* Quote */
.profile .quote {
    transform: translateY(-20px) !important;
    font-family: "Dancing Script", cursive;
    font-weight: 600;
    font-size: 18px;
    letter-spacing: 0.4px;
    line-height: 1.4;
    opacity: 0.9;
    text-shadow: 0 0 10px rgba(255,255,255,0.25);
    margin-bottom: 20px;
    margin: 0 auto;
    max-width: 240px;
    text-align: center;
    white-space: normal;
    word-wrap: break-word;
    overflow-wrap: break-word;

    opacity: 0;
    animation: textUp 0.6s ease forwards;
    animation-delay: 0.45s;
}

.profile .dynamic_island {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  height: 8px;
  width: 80px;

  background: #fff;
  border-radius: 999px;
  z-index: 10;

  overflow: hidden;
  cursor: pointer;

  transition:
    width 0.35s cubic-bezier(.16, 1, .3 ,1),
    background 0.3s ease;
}

.profile .dynamic_island:hover {
  height: 30px;
  width: 230px;
}


.theme-switcher {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;

  opacity: 0;
  pointer-events: none;
  transform: scale(0.92);

  transition:
    opacity 0.25s ease,
    transform 0.35s cubic-bezier(.16,1,.3,1);
}

.dynamic_island:hover .theme-switcher {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}


.theme-switcher button {
  padding: 4px 10px;
  height: 22px;
  border-radius: 999px;
  border: none;

  background: rgba(255,255,255,0.9);
  color: #000;
  font-size: 12px;
  font-weight: 600;

  cursor: pointer;
  white-space: nowrap;

  opacity: 0;
  transform: translateY(6px);

  transition:
    opacity 0.3s ease,
    transform 0.45s cubic-bezier(.16, 1, .3, 1),
    background 0.25s ease;
}

.dynamic_island:hover .theme-switcher button {
  opacity: 1;
  transform: translateY(0) scale(1.02);
}

.theme-switcher button:hover {
  transform: scale(1.08);
}

.dynamic_island:hover .theme-switcher button:nth-child(1) { transition-delay: 0.08s; }
.dynamic_island:hover .theme-switcher button:nth-child(2) { transition-delay: 0.12s; }
.dynamic_island:hover .theme-switcher button:nth-child(3) { transition-delay: 0.16s; }
.dynamic_island:hover .theme-switcher button:nth-child(4) { transition-delay: 0.20s; }


.theme-switcher button:hover {
  background: #fff;
}



/* Buttons */
.buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

button {
    padding: 12px;
    border-radius: 14px;
    border: 1px solid rgba(255, 255, 255, 0.55);
    cursor: pointer;
    background: rgba(255,255,255,0.24);
    font-size: 15px;
    font-weight: 500;
    transition: 0.25s ease;
    opacity: 0;
    animation: textUp 0.6s ease forwards;
}

button:nth-child(1) { animation-delay: 0.6s; }
button:nth-child(2) { animation-delay: 0.75s; }
button:nth-child(3) { animation-delay: 0.9s; }
button:nth-child(4) { animation-delay: 1.1s; }

button:hover {
    background: rgba(255,255,255,0.42);
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

button.active {
    background: rgba(255,255,255,0.5);
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);

}

/* ================= INFO CARD ================= */
.info {
    position: absolute;
    left: 0;
    width: 320px;
    padding: 25px;
    border-radius: 20px;

    background: rgba(255,255,255,0.18);
    backdrop-filter: blur(8px) saturate(120%);
    border: 1px solid rgba(255,255,255,0.48);
    box-shadow: 0 8px 30px rgba(0,0,0,0.22);

    /* CLOSED state */
    opacity: 0;
    transform: translateX(300px) scale(0.88);
    transform-origin: center left;

    transition:
        transform 0.45s cubic-bezier(.22,1,.36,1),
        opacity 0.3s ease;

    pointer-events: none;
    z-index: 1;
    will-change: transform, opacity;
}

.info.show {
    /* OPEN state */
    opacity: 1;
    transform: translateX(340px) scale(1);
    pointer-events: auto;
}


/* Title */
.info h3 {
    text-align: center;
    font-size: 22px;
    margin-bottom: 16px;
}

/* ===== TEXT STATES ===== */

/* Normal visible state (AFTER animation) */
.info h3,
.info .info-content li,
.info .info-content p {
    opacity: 1;
    transform: translateY(0);
}

/* BEFORE showup animation */
.info.is-animating h3,
.info.is-animating .info-content li,
.info.is-animating .info-content p {
    opacity: 0;
    transform: translateY(14px);
}

/* DURING close */
.info.is-closing h3,
.info.is-closing .info-content li,
.info.is-closing .info-content p {
    opacity: 1;
    transform: translateY(0);
}


/* ===== CLOSE BUTTON ===== */
.info .close {
    position: absolute;
    top: 14px;
    right: 14px;
    transform: none;
    font-size: 18px;
    line-height: 1;
}


.info .close:hover {
    background: rgba(255,255,255,0.35);
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.22);
}
/* ===== BANNER ===== */
.profile .banner {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 17%;
    background: url("bg5.jpg") center / cover no-repeat;
    z-index: 0;
}

/* soft fade at bottom */
.profile .banner::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to bottom,
        rgba(255,255,255,0.05),
        rgba(255,255,255,0.35)
    );
}
    
.profile {
    position: relative;
    overflow: hidden;
}

/* ===== Seperating lines ===== */
.dcircle {
    width: 8px;
    height: 8px;
    margin: 0 auto;
    background-color: white;
    transform: translateY(-18px);
    border-radius: 50%;
}

.profile .dlleft {
    height: 1px;
    width: 80px;
    margin: 0 auto;
    background-color: white;
    transform: translate(-60px, -22px) !important;
}

.profile .dlright {
    height: 1px;
    width: 80px;
    margin: 0 auto;
    background-color: white;
    transform: translate(60px, -22.5px) !important;
}


/* ===== PROGRESS BAR ===== */
.progress-group {
    margin-top: 7px;
}

.progress-item {
    margin-bottom: 10px;
}

.progress-label {
    font-size: 14px;
    margin-bottom: 6px;
    opacity: 0.95;
}

.progress-track {
    width: 100%;
    height: 8px;
    border-radius: 10px;
    background: rgba(255,255,255,0.3);
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    width: 0%;
    border-radius: 10px;
    background: white;
    transition: width 0.8s cubic-bezier(.22,1,.36,1);
}
/* ===== PROGRESS ANIMATION STATES ===== */
.info .progress-item,
.info .progress-item p {
    opacity: 1;
    transform: translateY(0);
}

.info.is-animating .progress-item,
.info.is-animating .progress-item p {
    opacity: 0;
    transform: translateY(14px);
}

.info.is-closing .progress-item,
.info.is-closing .progress-item p {
    opacity: 1;
    transform: translateY(0);
}

/* ===== PROGRESS POINTER ===== */
.progress-pointer {
    position: absolute;
    top: -6px;
    left: 0;
    transform: translateX(0);
    pointer-events: none;
    opacity: 0;
}

/* bubble */
.pointer-bubble {
    position: relative;
    background: white;
    color: #ff5e7e;
    font-size: 12px;
    font-weight: 600;
    padding: 3px 6px;
    border-radius: 6px;
    white-space: nowrap;
}

/* small arrow */
.pointer-bubble::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: -4px;
    transform: translateX(-50%);
    border-width: 4px 4px 0 4px;
    border-style: solid;
    border-color: white transparent transparent transparent;
}

/* animation states */
.info.is-animating .progress-pointer {
    opacity: 0;
    transform: translateY(6px);
}

.info.is-closing .progress-pointer {
    opacity: 0;
}

/* prevent pointer flashing during transitions */
.info:not(.show) .progress-pointer {
    opacity: 0 !important;
    animation: none !important;
}

.info.is-animating .progress-pointer,
.info.is-closing .progress-pointer {
    opacity: 0 !important;
    animation: none !important;
}
/* ===== CHECK BUTTON ===== */
.check-buttons {
    display: block;
    margin: 12px auto 0;
    opacity: 0;
    animation: buttonIn 0.45s ease forwards;
    transform: 0.22s cubic-bezier(.2,.8,.2,1),
        box-shadow 0.22s ease;
}
.check-buttons:hover {
    transform: translateY(-3px);
}

.check-buttons:active {
    transform: scale(0.96);
}
/* ===== GALLERY ===== */
.gallery {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    max-height: 260px;
    overflow-y: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.gallery::-webkit-scrollbar {
    width: 0;
    height: 0;
}

.gallery a {
    width: 78px;
    height: 78px;
    border-radius: 22px;
    padding: 6px;
    background: var(--bg);
    box-shadow:
        inset 3px 3px 6px var(--dark),
        inset -3px -3px 6px var(--light),
        8px 8px 16px var(--dark),
        -8px -8px 16px var(--light);
    transition:
        transform 0.25s cubic-bezier(.2,.8,.2,1),
        box-shadow 0.25s ease;
    opacity: 0;
    animation: pfpIn 0.45s cubic-bezier(.2,.8,.2,1) forwards;
}

.gallery a:hover {
    transform: translateY(-6px) scale(1.03);
    box-shadow:
        inset 3px 3px 6px var(--dark),
        inset -3px -3px 6px var(--light),
        12px 12px 22px var(--dark),
        -12px -12px 22px var(--light);
}

.gallery a:active {
    transform: scale(0.96);
    box-shadow:
        inset 4px 4px 8px var(--dark),
        inset -4px -4px 8px var(--light);
}

.gallery img {
    width: 100%;
    height: 100%;
    border-radius: 16px;
    object-fit: cover;
}

/* ===== GALLERY CLOSING STATE ===== */
.info:not(.show) .gallery a,
.info:not(.show) .check-buttons {
    opacity: 0 !important;
    transform: translateY(14px) scale(0.94) !important;
    animation: none !important;
}

.info.is-closing .gallery a {
    animation: pfpOut 0.35s ease forwards !important;
    animation-delay: 0.12s;
}

.info.is-closing .check-buttons {
    animation: buttonOut 0.3s ease forwards !important;
    animation-delay: 0.3s;
}

/* Opening state (normal entry) */
.info.show .gallery a {
    animation: pfpIn 0.45s cubic-bezier(.2,.8,.2,1) forwards;
}

.info.show .check-buttons {
    animation: buttonIn 0.45s ease forwards;
}


.gallery a:nth-child(1) { animation-delay: 0.08s; }
.gallery a:nth-child(2) { animation-delay: 0.14s; }
.gallery a:nth-child(3) { animation-delay: 0.20s; }
.gallery a:nth-child(4) { animation-delay: 0.26s; }

/* ===== PROGRESS BAR ===== */
#progressBar {
  flex: 1;
  height: 4px;
  appearance: none;
  border-radius: 4px;
  cursor: pointer;
  background: linear-gradient(
    to right,
    white 0%,
    rgba(255,255,255,0.35) 0%
  );
  width: 100%;
  height: 8px;
  border-radius: 8px;
}

#progressBar::-webkit-slider-thumb {
  appearance: none;
  width: 12px;
  height: 12px;
  background: white;
  border-radius: 50%;
}

#progressBar::-moz-range-thumb {
  width: 12px;
  height: 12px;
  background: white;
  border-radius: 50%;
  border: none;
}

/* ===== PROGRESS AREA ===== */
.progress-area {
  margin: 12px 0 16px;
}
#progressBar::-webkit-slider-thumb {
  width: 16px;
  height: 16px;
}

#progressBar::-moz-range-thumb {
  width: 16px;
  height: 16px;
}

.time-row {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  opacity: 0.85;
  margin-top: 6px;
}

/* ===== CONTROLS ===== */

.controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 25px;
  margin-bottom: 15px;
}

.control-btn {
  font-size: 18px;
  background: none;
  border: none;
  cursor: pointer;
  opacity: 1 !important;
  animation: none !important;
}
.control-btn.active {
  color: #ffdde8;
  text-shadow: 0 0 8px rgba(255,255,255,0.6);
}

.play-btn {
  font-size: 26px;
  background: none !important;
}

#playIcon {
  font-variation-settings:
    "FILL" 1,
    "wght" 500,
    "GRAD" 0,
    "opsz" 24;

  color: white;
}

/* ===== SONG INFO CENTER ALIGN ===== */

.song-info {
  text-align: center;
  margin-bottom: 8px;
}

.song-name {
  font-size: 16px;
  font-weight: 600;
}

.song-artist {
  font-size: 13px;
  opacity: 0.75;
}

/* ===== SONG TABLE ===== */
.song-table {
  font-size: 13px;
}

.song-header,
.song-row {
  display: grid;
  grid-template-columns: 30px 1fr 80px;
  padding: 8px;
  align-items: center;
}


.song-header {
  opacity: 0.6;
  border-bottom: 1px solid rgba(255,255,255,0.2);
}

.song-row {
  position: relative;
  display: grid;
  grid-template-columns: 28px 1fr auto;
  align-items: center;

  padding: 10px 14px;
  margin: 6px 0;

  border-radius: 14px;
  cursor: pointer;

  color: rgba(255,255,255,0.85);
  background: transparent;

  transition:
    background 0.35s ease,
    box-shadow 0.35s ease,
    transform 0.25s ease;
}

.song-row:hover {
  background: rgba(255,255,255,0.06);
  transform: translateX(4px);
}

.song-row.active {
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0.14),
    rgba(255,255,255,0.05)
  );

  box-shadow:
    inset 0 0 18px rgba(255,255,255,0.35),
    0 0 16px rgba(255,255,255,0.25);

  color: #fff;
}

.song-index {
  font-size: 13px;
  opacity: 0.7;
  transition: opacity 0.25s ease;
}

.song-row.active .song-index {
  opacity: 0;
}


.song-title {
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.song-title small {
  display: block;
  font-size: 12px;
  opacity: 0.7;
}

.song-album,
.song-date,
.song-duration {
  opacity: 0.8;
  font-size: 12px;
}

.song-duration {
  text-align: right;
  opacity: 0.7;
  font-size: 12px;
}

.song-header span:last-child {
  text-align: right;
}

/* ===== SONG LIST FADE + BLUR (TOP & BOTTOM) ===== */

.song-list {
  position: relative;
  max-height: 260px;
  overflow-y: auto;
  padding-right: 4px;

  /* fade text at top + bottom */
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 10px,
    black calc(100% - 10px),
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 10px,
    black calc(100% - 10px),
    transparent 100%
  );
}

/* blur zone overlays */
.song-list::before,
.song-list::after {
  content: "";
  position: sticky;
  left: 0;
  right: 0;
  height: 22px;
  pointer-events: none;
  z-index: 3;

  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* top blur */
.song-list::before {
  top: 0;
}

/* bottom blur */
.song-list::after {
  bottom: 0;
}


/* Hide scrollbar (Chrome, Edge, Safari) */
.song-list::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Hide scrollbar (Firefox) */
.song-list {
  scrollbar-width: none;
}

.song-name {
    font-weight: 700;
}

/* ===== FADED SEPARATOR LINE ===== */
.list-separator {
  height: 1px;
  margin: 6px 8px 10px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255,255,255,0.8),
    transparent
  );
  transform: translateY(-7.5px);
}

.list-separator-bottom {
  height: 1px;
  margin: 6px 8px 10px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255,255,255,0.8),
    transparent
  );
  transform: translateY(5px);
}

/* ===== MUSIC LIST ITEM APPEAR ===== */
.song-item {
  opacity: 0;
  transform: scale(0.96);
  animation: scaleFadeIn 0.25s ease-out forwards;
}

.icon-btn {
  padding: 8px;
}

.material-symbols-rounded {
  font-size: 22px;
  line-height: 1;
  user-select: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  font-variation-settings:
    "FILL" 1,
    "wght" 500,
    "GRAD" 0,
    "opsz" 24;
}

.control-btn.active .material-symbols-rounded {
  opacity: 1;
}

.icon-btn:hover .material-symbols-rounded {
  transform: scale(1.12);
}

/* ===== VOLUME ===== */

.volume-wrap {
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
  transform: translate(-2.8px, -20px) !important;
}

.volume-slider {
  width: 0;
  opacity: 0;

  appearance: none;
  height: 4px;
  border-radius: 6px;
  background: rgba(255,255,255,0.35);

  transition:
    width 0.35s ease,
    opacity 0.25s ease;
}

.volume-wrap:hover .volume-slider {
  width: 90px;
  opacity: 1;
}

.volume-slider::-webkit-slider-thumb {
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
}

.volume-slider::-moz-range-thumb {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
}


/* ===== WAVE FORM ===== */

#waveform {
  width: 100%;
  height: 30px;
  margin-top: 5px;
  opacity: 0.85;
}

.playing #waveform {
  filter: drop-shadow(0 0 6px rgba(255,255,255,0.4));
}


/* ===== TIME DISPLAY ===== */
.time-display {
  text-align: center;
  margin-bottom: 14px;
  padding: 10px 14px;
  border-radius: 14px;

  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.35);

  box-shadow: inset 0 0 12px rgba(255,255,255,0.25);
}

.time-label {
  display: block;
  font-size: 12px;
  opacity: 0.75;
  margin-bottom: 4px;
}

.time-value {
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0.6px;
  display: inline-block;
  min-width: 170px;
  text-align: center;
}

.main-clock {
  margin-top: 16px;
  opacity: 0.85;
  pointer-events: none;
}


/* ===== KEYFRAMES ===== */
@keyframes cardUp {
    from { opacity: 0; transform: translateY(40px) scale(0.94); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes avatarUp {
    from { opacity: 0; transform: translateY(22px) scale(0.94); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes textUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
}

@keyframes infoIn {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
}

@keyframes infoOut {
    from { opacity: 1; transform: translateY(0); }
    to   { opacity: 0; transform: translateY(16px); }
}

/* pointer entrance animation */
@keyframes pointerShow {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes pfpIn {
    from { opacity: 0; transform: translateY(14px) scale(0.94); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes buttonIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}


@keyframes pfpOut {
    from { opacity: 1; transform: translateY(0) scale(1); }
    to { opacity: 0; transform: translateY(14px) scale(0.94); }
}

@keyframes buttonOut {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(10px); }
}


@keyframes scaleFadeIn {
  to { opacity: 1; transform: scale(1);
  }
}

</style>
</head>

<body>
<div class="wrapper">
    <div class="profile" id="profileCard">
        <div class="banner"></div>
        <div class="avatar-zone">
            <div class="avatar-wrap">
                <span class="quarter_top"></span>
                <img src="pfp.png" class="avatar">
<!-- avatar image -->
                <span class="quarter_bottom"></span>
            </div>
        </div>

        <h2>Kaede Ayaka</h2>
        <div class="quote">“Don't panic, the moon is lost in the sea”</div>

        <!--seperators-->
        <div class="dcircle"></div>
        <div class="dlleft"></div>
        <div class="dlright"></div>

        <div class="buttons">
            <button onclick="requestInfo('about', this)">About Me</button>
            <button onclick="requestInfo('rules', this)">Rules</button>
            <button onclick="requestInfo('others', this)">Others</button>
            <button onclick="musicOpen('music', this)">My music list</button>
        </div>

        <div class="time-display main-clock" id="timeDisplay">
          <span class="time-label">My local time (GMT+7)</span>
          <span class="time-value" id="clockValue">--:--:-- --/--/----</span>
        </div>


        <div class="dynamic_island">
        <div class="theme-switcher">
            <button data-theme="purple">Purple</button>
            <button data-theme="pink">Pink</button>
            <button data-theme="dark">Dark</button>
            <button data-theme="blue">Blue</button>
        </div>
      </div>

    </div>

    <div class="info" id="infoBox">
        <button class="close" onclick="closeInfo()">×</button>
        <h3 id="infoTitle"></h3>
        <div id="infoText" class="info-content"></div>
    </div>
</div>

<script>
const quotes = [
    "Don't panic, the moon is lost in the sea",
    "Soft hearts are not weak, they are brave",
    "Bloom at your own pace",
    "Quiet progress is still progress",
    "You don't need to be perfect to begin",
    "Even small steps still move you forward",
    "The night is gentle to those who wait",
    "In the world with full of wrong, I want you to smile",
    "Food is the thing that can calm your little belly .^."
  ];

  const quoteEl = document.querySelector(".profile .quote");

  if (quoteEl) {
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];

    // Reset animation
    quoteEl.style.animation = "none";
    quoteEl.offsetHeight; // force reflow

    quoteEl.textContent = `"${randomQuote}"`;

    // Auto-center fix
    quoteEl.style.marginLeft = "auto";
    quoteEl.style.marginRight = "auto";
    quoteEl.style.display = "block";

    // Replay animation
    quoteEl.style.animation = "textUp 0.6s ease forwards";
    quoteEl.style.animationDelay = "0.45s";
  }

function openGallery() {
    closeInfo(() => openInfo("gallery"));
}

function goBackOthers() {
    closeInfo(() => openInfo("others"));
}

const infoBox = document.getElementById("infoBox");
const profileCard = document.getElementById("profileCard");
const title = document.getElementById("infoTitle");
const text = document.getElementById("infoText");
const buttons = document.querySelectorAll(".buttons button");

let isAnimating = false;

/* ===== TEXT ANIMATION ===== */
function animateContent(open = true) {
    const items = [
        title,
        ...text.querySelectorAll("li, p, .progress-item, .info-note")
    ];

    infoBox.classList.toggle("is-animating", open);

    items.forEach((el, i) => {
        if (open) {
            el.style.animation = "none";
            el.offsetHeight;
        }

        const delay = open
            ? 0.14 + i * 0.05
            : 0.05 + (items.length - i - 1) * 0.05;

        el.style.animation =
            `${open ? "infoIn" : "infoOut"} 0.26s ease forwards`;
        el.style.animationDelay = `${delay}s`;
    });

    return 0.26 + 0.05 * items.length;
}

/* ===== REQUEST ===== */
function requestInfo(type, btn) {
    if (isAnimating) return;
    isAnimating = true;

    buttons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    if (infoBox.classList.contains("show")) {
        closeInfo(() => openInfo(type));
    } else {
        openInfo(type);
    }
}

/* ===== OPEN ===== */
function openInfo(type) {
    profileCard.classList.add("shift");
    infoBox.classList.add("is-animating");

    if (type === "about") {
        title.textContent = "About Me";
        text.innerHTML = `
        <ul>
            <li><b>Main: </b> a 15 years old student attempting in coder course (dont know which to choose yet), ambidextrous</li>
            <li><b>DOB:</b> April 14th</li>
            <li><b>Nationality:</b> Vietnamese</li>
            <li><b>Personality:</b> INTP-T</li>
            <li><b>Gender:</b> Ask me</li>
            <li><b>Interests:</b> Crocheting, coding, reading books (light novels the most), manga (rarely)</li>
            <li><b>Sports:</b> Badminton, volleyball, shuttlecock kicking</li>
            <li><b>Games:</b> Minecraft, Geometry Dash, NES Tetris (practicing for level 18+)</li>
            <li><b>Music:</b> Mostly prefer relaxing and chilling genres like lofi, piano; pluggnb</li>
            <li><b>Other stuff:</b> Love rain smell and rainy days, gotten used to lightmode, handling 2 projects (I think?)</li>
        </ul>`;
    }

    if (type === "rules") {
        title.textContent = "Rules";
        text.innerHTML = `
        <ul>
            <li>Interact before sending DMs or a friend request, or else it would be ignored</li>
            <li>Please ask me before sending a friend request or just simply a DM.</li>
            <li>Only share if you feel <b>comfortable enough</b>, in order to avoid any unexpected dramas between both</li>
        </ul>`;
    }

    if (type === "others") {
        title.textContent = "Others";
        text.innerHTML = `
            <p><b>Close people to me:</b></p>
            <p class="info-note" style="font-size:14px;">
                Q, Heli, Snowey, Nekonyah, Nyako, Lena, Aqua, Fey Fey, Hinata, trixten,
                Hanako, Foxy, potato, soko, tienanh, blossom melody, arko, more...
            </p>

            <p><b>Programming skill progress:</b></p>

            <div class="progress-group">

                <div class="progress-item">

                    <div class="progress-label">HTML</div>
                    <div class="progress-track">
                        <div class="progress-fill" data-progress="45"></div>

                         <div class="progress-pointer">
                            <span class="pointer-bubble">45%</span>
                        </div>

                    </div>

                </div>

                <div class="progress-item">

                    <div class="progress-label">CSS</div>
                    <div class="progress-track">
                        <div class="progress-fill" data-progress="40"></div>

                         <div class="progress-pointer">
                            <span class="pointer-bubble">40%</span>
                        </div>

                    </div>

                </div>

                <div class="progress-item">

                    <div class="progress-label">JS</div>
                    <div class="progress-track">
                        <div class="progress-fill" data-progress="25"></div>

                        <div class="progress-pointer">
                            <span class="pointer-bubble">25%</span>
                        </div>

                    </div>
                </div>

                <div class="progress-item">

                    <div class="progress-label">C++</div>
                    <div class="progress-track">
                        <div class="progress-fill" data-progress="71"></div>

                        <div class="progress-pointer">
                            <span class="pointer-bubble">71%</span>
                        </div>

                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-label">Python</div>
                    <div class="progress-track">
                        <div class="progress-fill" data-progress="86"></div>

                        <div class="progress-pointer">
                            <span class="pointer-bubble">86%</span>
                        </div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-label">Pascal</div>
                    <div class="progress-track">
                        <div class="progress-fill" data-progress="24"></div>

                        <div class="progress-pointer">
                            <span class="pointer-bubble">24%</span>
                        </div>
                    </div>
                </div>

            </div>

            <p><b>Check my recommended pfps!</b></p>
            <button class="check-buttons" onclick="openGallery()">Check</button>
        `;
    }

    if (type === "gallery") {
        title.textContent = "Recommended pfps";

        const images = [
            "recommend_pfps/pfp1.jpg",
            "recommend_pfps/z7457270146748_f1c2db39cf3dae3cd07192f052ffed6c.jpg",
            "recommend_pfps/z7457270151410_c833b2fb054f1b928a72723919a26915.jpg",
            "recommend_pfps/z7457270164014_c243c571ddbbf8eb1c4dea5c5d0f542f.jpg",
            "recommend_pfps/z7457270184873_5656e6243a0be9f3cd4b4942831bdd17.jpg",
            "recommend_pfps/z7457270197070_e80f58af9b661a5d277c3e0bc164e4b6.jpg",
            "recommend_pfps/z7457270212620_f4977f5daf09dcf25108bbc40a71d38f.jpg",
            "recommend_pfps/z7457270234624_566b2ec06eb95033343cd9b19342c655.jpg",
            "recommend_pfps/z7457270249597_7dc597aaa3445fd1c7821bf32060b1ef.jpg",
            "recommend_pfps/z7457270260843_9c60566ff725266fd23ea0e1aa3e3db5.jpg",
            "recommend_pfps/z7457270281707_e7422507475518fb4bc002d38978d572.jpg",
            "recommend_pfps/z7457270293660_74a521e7c65730b9612eb1f890f7af06.jpg",
            "recommend_pfps/z7457270300951_bba9ea2dae7108d9967a60281d22fd29.jpg",     
            "recommend_pfps/z7457270335422_ba5b9fea5da2bd438f359291ffffc97d.jpg",    
            "recommend_pfps/z7457270357196_3f1b4a5fede80be7078f9c4bfca1f0ac.jpg",    
            "recommend_pfps/z7457270366767_01cbcf1fe5875dcb82063db386d2dff2.jpg",    
            "recommend_pfps/z7457270383884_23393cc9eacf5cd74deb1ae2c31ac4d5.jpg",    
            "recommend_pfps/z7457270400612_527f73b0319c870cf2ccc157e20d8457.jpg",    
            "recommend_pfps/z7457270410253_c582614bcd0616b19f4db1642fdab6b3.jpg",    
            "recommend_pfps/z7457270424165_e1e914576d68da9d125c33c134b3f5dc.jpg",    
            "recommend_pfps/z7457270435937_50d2b2957db63f98c01bf4f316cfb516.jpg",    
            "recommend_pfps/z7457270457016_1fe112d9c2d1de8d34ee0855e4fb660e.jpg",    
            "recommend_pfps/z7457270469758_a367516ff4e922a7b2a826c283037900.jpg",    
            "recommend_pfps/z7457270482041_e7749176ecde09f9107ccc4930483f91.jpg",    
            "recommend_pfps/z7457270499151_61a0a7d925db9c1cc5bd293b23b97fd0.jpg",    
            "recommend_pfps/z7457270512998_3bf9b374215b37be95c88cda82bcbc30.jpg",    
            "recommend_pfps/z7457270534282_6ef69eede9c4639b703970937b3b9b58.jpg",    
            "recommend_pfps/z7457270547744_0d56e37b749bcf5161742c6e59df10c7.jpg",    
            "recommend_pfps/z7457270558809_7b1aaea4efd2450bb167fa4970dde2b1.jpg",    
            "recommend_pfps/z7457270582096_f7304255c412e7b53bbcfef4bb449230.jpg",    
            "recommend_pfps/z7457270586983_53ca8a2e8a4874d1546b2c5ee11c7eee.jpg",    
            "recommend_pfps/z7457270598016_c667c722cad346a0676e1930d5f31c1a.jpg",    
            "recommend_pfps/z7457270618323_28a59f841a3762973b6533ce7466510e.jpg",    
            "recommend_pfps/z7457270631568_c80f4e5cfd8ec08c39beae94a21e4aaa.jpg",    
            "recommend_pfps/z7457270644663_a4222678978aeb4396f6a42d5e15a94b.jpg",    
            "recommend_pfps/z7457270658533_a09879ea329cf8b3b477706a6085e614.jpg",    
            "recommend_pfps/z7457270677900_47978b882a784d3462f312764fad9ff7.jpg",    
            "recommend_pfps/z7457270696669_67594b5ccfc63b9684514fea4a62bab4.jpg",    
            "recommend_pfps/z7457270711024_78162cb4498467d49e6b10be1e4d41c8.jpg",    
            "recommend_pfps/z7457270718280_0823c3745da785264079f5a7744b4e79.jpg",    
            "recommend_pfps/z7457270758640_068ee8bebc3c43084242fe5808899468.jpg",    
            "recommend_pfps/z7457270768223_1ac7abb565eb28db7ae9f9de622c3e9e.jpg",    
            "recommend_pfps/z7457270768850_d3dd2477d906e250b4660d0d6b7d0448.jpg",    
            "recommend_pfps/z7457270790139_2c57c39ad6d6529d29ae5f017fc1b8e5.jpg",    
            "recommend_pfps/z7457270806852_72e24a0086afbe26d9ab5461f5cda12e.jpg",    
            "recommend_pfps/z7457270814228_ab184562cceb9ce3b021964af1984a77.jpg",    
            "recommend_pfps/z7457270831241_7f766718c02c1ac23b324fef6674fb4e.jpg",    
            "recommend_pfps/z7457270845721_ae01e392eb5165aae78f040980d3c056.jpg",    
            "recommend_pfps/z7457270857205_0c693d19fcc33350073ace7945a2ad22.jpg",    
            "recommend_pfps/z7457270871603_a54dc702d605d096f04604018239f8f9.jpg",    
            "recommend_pfps/z7457275893574_683282ee181ef4edf8a9356f8705aabb.jpg",    
            "recommend_pfps/z7457275903485_cc891468ba13c1f8a4136dfbf74c9f5e.jpg",    
            "recommend_pfps/z7457275913748_9e15cf6a2032f6790c678db5a538e172.jpg",    
            "recommend_pfps/z7457275932682_532a4b3b5148e00f1a4f51161c40d3eb.jpg",    
            "recommend_pfps/z7457275939224_5dce035060b3162847fc89e50d620892.jpg",    
            "recommend_pfps/z7457275954986_a29c863ee145298eed9ca1d0d77d5d13.jpg",    
            "recommend_pfps/z7457275965656_137e8b5b4844944a40bf79d280bd44ce.jpg",    
            "recommend_pfps/z7457275981629_4232468df01c7c497dbbc5f82b8c2709.jpg",    
            "recommend_pfps/z7457275994107_18c456d37a3f20f67b32decd35aa97c4.jpg",    
            "recommend_pfps/z7457275994249_57d5dea2fb696758c691e9e53b64064a.jpg",    
            "recommend_pfps/z7457276020658_c4c242971b1e707a1be54b3ae3401642.jpg",    
            "recommend_pfps/z7457276024872_7df1063a61b8ccad1a861141e1dee652.jpg",    
            "recommend_pfps/z7457276025017_064b915ac8eac7466fa9109552d2c2da.jpg",    
            "recommend_pfps/z7457276063408_6afc54e4254337fba895c99c9e360044.jpg",    
            "recommend_pfps/z7457276066379_01d465be55b7f84166a344abd8d2a886.jpg",    
            "recommend_pfps/z7457276072971_afc31683e8aff9697d0d94b67465e2e0.jpg",    
            "recommend_pfps/z7457276078133_aa2d4dd6bd1933eaabe0fe13fd86de8d.jpg",    
            "recommend_pfps/z7457276107215_142f1c0f117cce2136c79cec93d758a2.jpg",    
            "recommend_pfps/z7457276112589_47c0f6241dc860d7d2ce1f3a63206788.jpg",    
            "recommend_pfps/z7457276116822_764ff14d052a27bf08d634a624b59e5b.jpg",    
            "recommend_pfps/z7457276118858_bb721cb9749bf4922765619b736d5a23.jpg",    
            "recommend_pfps/z7457276174856_b04cfc68db95103b2cebefcc410b5c5b.jpg",    
            "recommend_pfps/z7457276184144_f0bdb9e34b9d216db014a3b48929aac8.jpg",    
            "recommend_pfps/z7457276184278_53dd1bf1b09139ee88aa32fdd6f0fcbb.jpg",    
            "recommend_pfps/z7457276185395_e5990d72ea4fc5e2911f4c0482dd04d3.jpg",    
            "recommend_pfps/z7457276185528_fe551598f7cde052d4a55e5cb29bed88.jpg",    
            "recommend_pfps/z7457276193690_baa87491d05c1096c10e775d01b8b0d2.jpg",    
            "recommend_pfps/z7457276196091_62a0c4f6cceae8c954e89d4e421ec538.jpg",    
            "recommend_pfps/z7457276295908_2bc843f41860f64699b37e9c01f67445.jpg",    
            "recommend_pfps/z7457276300996_e9c19b18d195c2323eadbe36c85c3f2c.jpg",    
            "recommend_pfps/z7457276304164_70277eb5a3ba97a0b39f4bbd3c7380b7.jpg",    
            "recommend_pfps/z7457276305711_815d65c9b91e0e74b5b888acdfd1d1bb.jpg",    
            "recommend_pfps/z7457276309081_bc53227a44fc6c3c8a79c26a2e4dd466.jpg",    
            "recommend_pfps/z7457276309577_3a367eb6541a27924d450cab049d1b63.jpg",       
            "recommend_pfps/z7457276315329_f797f04e2ed831aef8b74aa304f65931.jpg",    
            "recommend_pfps/z7457276317558_b065492282dca71ea02e0702d0efc4e3.jpg",    
            "recommend_pfps/z7457276321913_5691ccbb1e74c7c3308fc218a223e97d.jpg",    
            "recommend_pfps/z7457276327366_5b264456595859cc66cfca882991b0ea.jpg",    
            "recommend_pfps/z7457276428840_d73e5afe0e1f6ab9dfbf88fc00bf335a.jpg",    
            "recommend_pfps/z7457276428969_b3a7e3ec0140dc656f505b3a2a7423c8.jpg",    
            "recommend_pfps/z7457276430385_01ded3720446132e76d5150c4cc98ff7.jpg",    
            "recommend_pfps/z7457276437703_2399b4c5c84cb0a295d587f80595175d.jpg",    
            "recommend_pfps/z7457276440345_6117668d5a48e1c489934a8887b08c25.jpg",    
            "recommend_pfps/z7457276440747_89c681f4a01d7785c6a5c7752c8e809e.jpg",    
            "recommend_pfps/z7457276441194_b7c6568a43c85bdb9865b18c17e380c7.jpg",    
            "recommend_pfps/z7457276444362_a4037792e4ba46dd702676a94804d4bb.jpg",    
            "recommend_pfps/z7457276451395_e4bb5a64e9b2aaaec4ca3ecd3c7c8f1d.jpg",    
            "recommend_pfps/z7457276453035_f0b0d1dc6d995884724cd70886c11266.jpg",    
            "recommend_pfps/z7457276453754_73c8ea2ee6ef8070e0dedbf2270a8b91.jpg",    
        ];

        text.innerHTML = `
            <div class="gallery">
                ${images.map(src => `
                    <a href="${src}" download>
                        <img src="${src}">
                    </a>
                `).join("")}
            </div>

            <button class="check-buttons" onclick="goBackOthers()">← Back</button>
        `;
    }



    infoBox.classList.remove("show");
    infoBox.getBoundingClientRect();
    requestAnimationFrame(() => {
        infoBox.classList.add("show");
    });


    setTimeout(() => {
        document.querySelectorAll(".progress-fill").forEach((bar, i) => {
            setTimeout(() => {
                const value = Math.max(0, Math.min(100, bar.dataset.progress));
                bar.style.width = value + "%";

                const track = bar.parentElement;
                const pointer = track.querySelector(".progress-pointer");
                const bubble = pointer.querySelector(".pointer-bubble");

                bubble.textContent = value + "%";
                pointer.style.left = `calc(${value}% - 12px)`;

                pointer.style.opacity = "0";
                pointer.style.transform = "translateY(6px)";
                pointer.style.animation = "none";
                pointer.offsetHeight;

                pointer.style.animation = "pointerShow 0.45s cubic-bezier(.22,1,.36,1) forwards";
            }, i * 120);
        });
    }, 820);


    setTimeout(() => {
        const duration = animateContent(true);
        setTimeout(() => {
            infoBox.classList.remove("is-animating");
            isAnimating = false;
        }, duration * 1000);
    }, 360);
}

/* ===== CLOSE ===== */
function closeInfo(callback) {
    if (!infoBox.classList.contains("show")) return;

    infoBox.classList.add("is-closing");
    const duration = animateContent(false);
    setTimeout(() => {
        document.querySelectorAll(".progress-fill").forEach(bar => {
            bar.style.width = "0%";

            const pointer = bar.parentElement.querySelector(".progress-pointer");
            if (pointer) {
                pointer.style.opacity = "0";
                pointer.style.animation = "none";
            }
        });
        infoBox.classList.remove("show");
        infoBox.classList.remove("is-closing");
        profileCard.classList.remove("shift");
        buttons.forEach(b => b.classList.remove("active"));
        isAnimating = false;
        if (callback) callback();
    }, duration * 1000);
}



/*music list*/

let isShuffle = false;
let repeatMode = 0; // 0=off, 1=once
let audio = new Audio();
let currentSongIndex = 0;

/* ===== WAVEFORM SETUP ===== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const analyser = audioCtx.createAnalyser();
analyser.fftSize = 1024;

const source = audioCtx.createMediaElementSource(audio);
source.connect(analyser);
analyser.connect(audioCtx.destination);

const bufferLength = analyser.frequencyBinCount;
const dataArray = new Uint8Array(bufferLength);
/* ===== WAVEFORM DRAWER ===== */
let waveformCtx;
let waveformCanvas;

function drawWaveform() {
  requestAnimationFrame(drawWaveform);

  if (!waveformCtx || !waveformCanvas) return;

  analyser.getByteFrequencyData(dataArray);
  waveformCtx.clearRect(0, 0, waveformCanvas.width, waveformCanvas.height);

  const barWidth = waveformCanvas.width / bufferLength;
  const radius = 4;

  waveformCtx.fillStyle = "rgba(255,255,255,0.85)";
  const gradient = waveformCtx.createLinearGradient(0, 0, 0, waveformCanvas.height);
  gradient.addColorStop(0, "rgba(255,255,255,0.95)");
  gradient.addColorStop(1, "rgba(255,255,255,0.35)");
  waveformCtx.fillStyle = gradient;
  for (let i = 0; i < bufferLength; i++) {
    const value = dataArray[i];
    const height = (value / 255) * waveformCanvas.height;

    const x = i * barWidth;
    const y = waveformCanvas.height - height;
    const w = barWidth - 3;
    const h = height;

    drawRoundedRect(waveformCtx, x, y, w, h, radius);
  }
}

function drawRoundedRect(ctx, x, y, w, h, r) {
  r = Math.min(r, w / 2, h / 2);

  ctx.beginPath();
  ctx.moveTo(x + r, y);
  ctx.lineTo(x + w - r, y);
  ctx.quadraticCurveTo(x + w, y, x + w, y + r);
  ctx.lineTo(x + w, y + h - r);
  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
  ctx.lineTo(x + r, y + h);
  ctx.quadraticCurveTo(x, y + h, x, y + h - r);
  ctx.lineTo(x, y + r);
  ctx.quadraticCurveTo(x, y, x + r, y);
  ctx.closePath();
  ctx.fill();
}


audio.addEventListener("play", () => {
  audioCtx.resume();
  drawWaveform();
});


/* ===== SONG DATA ===== */
/* MUST USE: name, artist, file, duration */
const musicList = [
  {
    title: "A Little Love",
    artist: "Fiona Fung",
    file: "A Little Love.mp3",
    duration: "3:11"
  },
  {
    title: "Angel's Dream",
    artist: "Aakash Gandhi",
    file: "Angel's Dream.mp3",
    duration: "3:12"
  },
  {
    title: "Below and Above",
    artist: "Minecraft, Amos Roddy",
    file: "Below and Above.mp3",
    duration: "3:32"
  },
  {
    title: "blu",
    artist: "Zachz Winner",
    file: "blu.mp3",
    duration: "1:16"
  },
  {
    title: "blue",
    artist: "yung kai",
    file: "blue.mp3",
    duration: "3:34"
  },
  {
    title: "Broken Clocks",
    artist: "Minecraft, Amos Roddy",
    file: "Broken Clocks.mp3",
    duration: "3:33"
  },
  {
    title: "Clark",
    artist: "C418",
    file: "Clark.mp3",
    duration: "3:11"
  },
  {
    title: "Comfort Chain",
    artist: "Instupendo",
    file: "Comfort Chain.mp3",
    duration: "2:51"
  },
  {
    title: "Comforting Memories",
    artist: "Kumi Tanioka",
    file: "Comforting Memories.mp3",
    duration: "4:35"
  },
  {
    title: "Cute",
    artist: "Aurel Surya Lie",
    file: "Cute.mp3",
    duration: "2:58"
  },
  {
    title: "First Date",
    artist: "frad",
    file: "First Date.mp3",
    duration: "2:53"
  },
  {
    title: "Fish In The Pool",
    artist: "Hekuto Pascal",
    file: "Fish In The Pool.mp3",
    duration: "4:36"
  },
  {
    title: "Fly A Letter To The WInd",
    artist: "July",
    file: "Fly A Letter To The WInd.mp3",
    duration: "4:04"
  },
  {
    title: "Haggstrom",
    artist: "C418",
    file: "Haggstrom.mp3",
    duration: "3:24"
  },
  {
  title: "His Theme",
    artist: "Toby Fox",
    file: "His Theme.mp3",
    duration: "2:39"
  },
  {
    title: "I Do",
    artist: "911",
    file: "I Do.mp3",
    duration: "3:27"
  },
  {
    title: "In Memory",
    artist: "Nightmargin",     
    file: "In Memory.mp3",
    duration: "1:34"
  },
  {
    title: "In The Morning Light - In The Mirror (1997)",
    artist: "Yanni",
    file: "In The Morning Light.mp3",
    duration: "3:51"
  },
  {
    title: "Invisible Beauty",
    artist: "Aakash Gandhi",
    file: "Invisible Beauty.mp3",
    duration: "3:07"
  },
  {
    title: "Komorebi",
    artist: "Kumi Tanioka, Minecraft",
    file: "komorebi.mp3",
    duration: "4:47"
  },
    {
    title: "Mice on Venus",
    artist: "C418",
    file: "Mice on Venus.mp3",
    duration: "4:41"
  },
  {
    title: "Lover Online",
    artist: "Zachz Winner",
    file: "Lover Online.mp3",
    duration: "1:37"
  },
  {
    title: "One Step Closer",
    artist: "Aakash Gandhi",
    file: "One Step Closer.mp3",
    duration: "2:12"
  },
  {
    title: "Proud Of You",
    artist: "Fiona Fung",
    file: "Proud Of You.mp3",
    duration: "3:06"
  },
  {
    title: "So Cute",
    artist: "Kim Sung Hwan",
    file: "So Cute.mp3",
    duration: "1:56"
  },
  {
    title: "Somewhere Only We Know",
    artist: "Rhianne",
    file: "Somewhere Only We Know.mp3",
    duration: "3:04"
  },
  {
    title: "Subwoofer Lullaby",
    artist: "C418",
    file: "Subwoofer Lullaby.mp3",
    duration: "3:28"
  },
  {
    title: "Sundial Dreams",
    artist: "Kevin Kern",
    file: "Sundial Dreams.mp3",
    duration: "4:46"
  },
  {
    title: "Sunflower",
    artist: "Stavensuniverse (ft. Atropos)",
    file: "Sunflower.mp3",
    duration: "3:18"
  },
  {
    title: "Tabun",
    artist: "YOASOBI",
    file: "Tabun.mp3",
    duration: "4:18"
  },
  {
    title: "That Girl",
    artist: "Olly Murs",
    file: "That Girl.mp3",
    duration: "2:56"
  },
  {
    title: "True Courage",
    artist: "Eric Chiryoku",
    file: "True Courage.mp3",
    duration: "4:18"
  },
  {
    title: "Windy Hill",
    artist: "羽肿",
    file: "Windy Hill.mp3",
    duration: "5:08"
  },
  {
    title: "Wish",
    artist: "Choi Yu Ree",
    file: "Wish.mp3",
    duration: "3:57"
  },
  {
    title: "君の虜 (Original)",
    artist: "Rizky Ayuba",
    file: "君の虜 (Original).mp3",
    duration: "2:54"
  },
  {
    title: "若月亮没来",
    artist: "王宇宙Leto ft 喬浚丞", 
    file: "若月亮没来.mp3",
    duration: "2:53"
  },
  {
    title: "Escape",
    artist: "imase",
    file: "逃避行.mp3",
    duration: "3:14"
  },
  {
    title: "飞鸟和蝉",
    artist: "任然",
    file: "飞鸟和蝉.mp3",
    duration: "4:56"
  },
];
/* ===== MUSIC HTML ===== */
function musicOpen(type, btn) {
    // Active button state
    buttons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    if (isAnimating) return;
    isAnimating = true;

    if (infoBox.classList.contains("show")) {
        closeInfo(() => openMusic());
    } else {
        openMusic();
    }
}

function openMusic() {
  profileCard.classList.add("shift");
  infoBox.classList.add("is-animating");

  title.textContent = "My music list";
  text.innerHTML = getMusicHTML();
  waveformCanvas = document.getElementById("waveform");
  waveformCtx = waveformCanvas.getContext("2d");

  infoBox.offsetHeight;
  infoBox.classList.add("show");

  const volumeSlider = document.querySelector(".volume-slider");
  const volumeIcon = document.querySelector(".volume-icon");

  volumeSlider.value = audio.volume;

  volumeSlider.addEventListener("input", e => {
    audio.volume = parseFloat(e.target.value);
  });

  audio.addEventListener("volumechange", () => {
    if (audio.volume === 0) volumeIcon.textContent = "volume_off";
    else if (audio.volume < 0.5) volumeIcon.textContent = "volume_down";
    else volumeIcon.textContent = "volume_up";
  });

  // Init music
  setTimeout(() => {
    renderSongList();
    loadSong(currentSongIndex);
    syncMusicButtons();
  }, 100);

  setTimeout(() => {
    const duration = animateContent(true);
    setTimeout(() => {
      infoBox.classList.remove("is-animating");
      isAnimating = false;
    }, duration * 1000);
  }, 360);
}




function getMusicHTML() {
  return `
    <div class="music-player fade-in">

      <div class="song-info fade-in delay-1">
        <div class="song-name" id="songName"></div>
        <div class="song-artist" id="songArtist"></div>
      </div>

        <div class="progress-area fade-in delay-2">
            <canvas id="waveform" width="320" height="15"></canvas>
            <input type="range" id="progressBar" value="0">
            <div class="time-row">
                <span id="currentTime">0:00</span>
                <span id="totalTime">0:00</span>
            </div>
        </div>


        <div class="controls fade-in delay-3">
        <button class="control-btn icon-btn" id="shuffleBtn" onclick="toggleShuffle()">
        <span class="material-symbols-rounded">shuffle</span>
        </button>


        <button class="control-btn icon-btn" onclick="prevSong()">
        <span class="material-symbols-rounded">skip_previous</span>
        </button>

        <button class="control-btn play-btn icon-btn" onclick="togglePlay()">
        <span class="material-symbols-rounded" id="playIcon">
            play_arrow
        </span>
        </button>

        <button class="control-btn icon-btn" onclick="nextSong()">
        <span class="material-symbols-rounded">skip_next</span>
        </button>

        <button class="control-btn icon-btn" id="repeatBtn" onclick="toggleRepeat()">
            <span class="material-symbols-rounded" id="repeatIcon">repeat</span>
        </button>
        </div>

        <div class="volume-wrap">
        <span class="material-symbols-rounded volume-icon">volume_up</span>
        <input
            type="range"
            min="0"
            max="1"
            step="0.01"
            class="volume-slider"
        >
        </div>

      <div class="song-table fade-in delay-4">
        <div class="song-header">
          <span>#</span>
          <span>Title</span>
          <span>Duration</span>
        </div>

        <!--Song list-->

        <div class="list-separator"></div>
        <div class="song-list" id="songList"></div>
        <div class="list-separator-bottom"></div>
      </div>

    </div>
  `;
}

/* ===== LOAD SONG ===== */
function loadSong(index) {
  currentSongIndex = index;
  const song = musicList[index];

  audio.src = `music_mp3s/${song.file}`;
  document.getElementById("songName").textContent = song.title;
  document.getElementById("songArtist").textContent = song.artist;
  document.getElementById("totalTime").textContent = song.duration;
  updateActiveSong();
}


/* ===== CONTROLS ===== */
function togglePlay() {
  if (!audio) return;

  audio.paused ? audio.play() : audio.pause();
}


function nextSong() {
  if (isShuffle) {
    let next;
    do {
      next = Math.floor(Math.random() * musicList.length);
    } while (next === currentSongIndex && musicList.length > 1);
    currentSongIndex = next;
  } else {
    currentSongIndex = (currentSongIndex + 1) % musicList.length;
  }

  loadSong(currentSongIndex);
  audio.play();
}

function prevSong() {
  currentSongIndex =
    (currentSongIndex - 1 + musicList.length) % musicList.length;

  loadSong(currentSongIndex);
}




/* ===== PROGRESS BAR ===== */
audio.addEventListener("timeupdate", () => {
  const bar = document.getElementById("progressBar");
  const current = document.getElementById("currentTime");

  if (!bar || !audio.duration) return;

  const percent = (audio.currentTime / audio.duration) * 100;
  bar.value = percent;

  bar.style.background = `
    linear-gradient(
      to right,
      white ${percent}%,
      rgba(255,255,255,0.35) ${percent}%
    )
  `;

  const m = Math.floor(audio.currentTime / 60);
  const s = Math.floor(audio.currentTime % 60).toString().padStart(2, "0");
  current.textContent = `${m}:${s}`;
});


document.addEventListener("input", (e) => {
  if (e.target.id === "progressBar") {
    audio.currentTime = (e.target.value / 100) * audio.duration;
  }
});

/* ===== SONG LIST ===== */
function renderSongList() {
  const list = document.getElementById("songList");
  list.innerHTML = "";

  musicList.forEach((song, index) => {
    const row = document.createElement("div");
    row.className = "song-row fade-in";
    row.dataset.index = index;

    row.innerHTML = `
      <span class="song-index">${index + 1}</span>
      <span class="song-title">
        ${song.title}
        <small>${song.artist}</small>
      </span>
      <span class="song-duration">${song.duration}</span>
    `;

    row.addEventListener("click", () => {
      currentSongIndex = index;
      loadSong(index);
      audio.play();
    });

    list.appendChild(row);
  });

  updateActiveSong();
}

function updateActiveSong() {
  document.querySelectorAll(".song-row").forEach(row =>
    row.classList.remove("active")
  );

  document
    .querySelector(`.song-row[data-index="${currentSongIndex}"]`)
    ?.classList.add("active");
}


audio.addEventListener("ended", () => {
  if (repeatMode === 1) {
    audio.currentTime = 0;
    audio.play();
    return;
  }

  if (isShuffle) {
    let nextIndex;
    do {
      nextIndex = Math.floor(Math.random() * musicList.length);
    } while (nextIndex === currentSongIndex && musicList.length > 1);

    loadSong(nextIndex);
    audio.play();
    return;
  }

  if (currentSongIndex < musicList.length - 1) {
    nextSong();
  }
});



function updatePlayButton(isPlaying) {
  const icon = document.getElementById("playIcon");
  if (!icon) return;

  icon.textContent = isPlaying ? "pause" : "play_arrow";
}



function toggleShuffle() {
  isShuffle = !isShuffle;
  syncMusicButtons();
  document.getElementById("shuffleBtn")
    .classList.toggle("active", isShuffle);
}

function toggleRepeat() {
  repeatMode = repeatMode === 0 ? 1 : 0;
  audio.loop = repeatMode === 1;
  syncMusicButtons();
}


function syncMusicButtons() {
  const repeatBtn = document.getElementById("repeatBtn");
  const repeatIcon = document.getElementById("repeatIcon");
  const shuffleBtn = document.getElementById("shuffleBtn");

  if (shuffleBtn) {
    shuffleBtn.classList.toggle("active", isShuffle);
  }

  if (!repeatBtn || !repeatIcon) return;

    repeatBtn.classList.toggle("active", repeatMode === 1);
}


audio.addEventListener("play", () => updatePlayButton(true));
audio.addEventListener("pause", () => updatePlayButton(false));


// volume bar

audio.addEventListener("volumechange", () => {
  const icon = document.querySelector(".volume-icon");

  if (audio.volume === 0) icon.textContent = "volume_off";
  else if (audio.volume < 0.5) icon.textContent = "volume_down";
  else icon.textContent = "volume_up";
});


/*Theme switcher*/
document.querySelectorAll('.theme-switcher button').forEach(button => {
  button.addEventListener('click', () => {
    const theme = button.getAttribute('data-theme');
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  });
});
const savedTheme = localStorage.getItem('theme');
if (savedTheme) {
  document.documentElement.setAttribute('data-theme', savedTheme);
}
if (typeof button !== "undefined" && island) {
  button.addEventListener('click', () => {
    island.blur();
  });
}


//time
document.addEventListener("DOMContentLoaded", () => {
  const clockEl = document.getElementById("clockValue");
  if (!clockEl) return;

  function pad(n) {
    return String(n).padStart(2, "0");
  }

  function updateClock() {
    const now = new Date();
    const utc = now.getTime() + now.getTimezoneOffset() * 60000;
    const hanoi = new Date(utc + 7 * 3600000);

    clockEl.textContent =
      `${pad(hanoi.getHours())}:` +
      `${pad(hanoi.getMinutes())}:` +
      `${pad(hanoi.getSeconds())} ` +
      `${pad(hanoi.getDate())}/` +
      `${pad(hanoi.getMonth() + 1)}/` +
      hanoi.getFullYear();
  }

  updateClock();
  setInterval(updateClock, 1000);
});


/* ======== GAINNODE ======== */
const playerContext = new (window.AudioContext || window.webkitAudioContext)();

const playerAnalyser = playerContext.createAnalyser();
playerAnalyser.fftSize = 1024;

const playerGain = playerContext.createGain();
playerGain.gain.value = 1.5;

const mediaSource = playerContext.createMediaElementSource(audio);

// === CONNECTION ORDER ===
mediaSource.connect(playerAnalyser);
playerAnalyser.connect(playerGain);
playerGain.connect(playerContext.destination);

const volumeSlider = document.querySelector(".volume-slider");

volumeSlider.addEventListener("input", e => {
  playerGain.gain.value = parseFloat(e.target.value);
});

audio.addEventListener("play", () => {
  if (playerContext.state === "suspended") {
    playerContext.resume();
  }
});


</script>


</body>
</html>